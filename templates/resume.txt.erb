<%= contact["name"].upcase + "\n" %>

http://<%= contact["site"] %> * http://<%= contact["github"] %> * <%= contact["email"] %>
<% if contact["address"] && contact["cell"] %>
<%= contact["address"] %> * <%= contact["cell"] + "\n" %>
<% end #if %>
<% if contact["citizenship"] %>
<%= "**" + contact["citizenship"] + "**\n" %>
<% end #if%>
--------------------------------------------------------------------------------
<% def wrap(text) %>
<%   text.gsub(/(.{1,74})(\s+|$)/, "\\1\n      ").strip %>
<% end #def %>

WORK EXPERIENCE

<% work.each do |entry| %>
  <%= entry["title"] %>
  <%= entry["employer"] %>, <%= entry["location"] %>
  <%= entry["start"] %> -- <%= entry["end"] %>

<% if entry["description"] %>
<% entry["description"].each do |item| %>
    - <%= wrap item %>
<% end #each %>

<% end #if %>
<% end #each %>

PUBLICATIONS

<% publications.each do |entry| %>
<% authors = entry["authors"] %>
<% title = entry["title"] %>
<% published_in = entry["in"] %>
<% date = entry["date"] %>
<% entry_text = "#{authors}, #{title}, #{published_in}, #{date}" %>
    - <%= wrap entry_text %>
<% end #each %>


TECHNICAL SKILLS

<% skills.each do |entry| %>
    - <%= wrap entry %>
<% end #each %>


TEACHING EXPERIENCE

<% teaching.each do |entry| %>
  <%= entry["title"] %>
  <%= entry["employer"] %>, <%= entry["location"] %>
  <%= entry["start"] %> -- <%= entry["end"] %>

<% if entry["description"] %>
<% entry["description"].each do |item| %>
    - <%= wrap item %>
<% end #each %>

<% end #if %>
<% end #each %>

SERVICE

<% service.each_with_index do |entry, index| %>
  <%= entry["position"] %>
<% list = entry["list"].map do |e| %>
<%   note = if e["note"] then " (#{e['note']})" else "" end %>
<%   "#{e['name']}#{note}" %>
<% end #map %>
    - <%= wrap list.join(", ") %>
<% if index != service.size - 1 %>

<% end #if %>
<% end #each %>


AWARDS

<% awards.each_with_index do |entry, index| %>
    - <%= wrap entry["name"] %>
      <%= entry["date"] %>
<% if index != awards.size - 1 %>

<% end #if %>
<% end #each %>


EDUCATION

<% education.each_with_index do |entry, index| %>
  <%= entry["level"] %>
  <%= entry["institution"] %>, <%= entry["location"] %>
<% if entry["date"].nil? %>
  <%= entry["start"] %> -- <%= entry["end"] %>
<% else %>
  <%= entry["date"] %>
<% end #if %>
<% if entry["notes"] %>
<% entry["notes"].each do |item| %>
      <%= item %>
<% end #each %>
<% end #if %>
<% if index != education.size - 1 %>

<% end #if %>
<% end #each_with_index %>
